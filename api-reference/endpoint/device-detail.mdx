---
title: 'æŸ¥è¯¢è®¾å¤‡è¯¦æƒ…'
openapi: 'GET /v2/devicemgr/r3/openapi/device/detail'
---

## è®¾å¤‡è¯¦æƒ…æ¦‚è¿°

è·å–æŒ‡å®šè®¾å¤‡çš„å®Œæ•´è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å±æ€§ã€è¿æ¥çŠ¶æ€ã€æœ€æ–°æ•°æ®ã€é…ç½®å‚æ•°å’Œç»Ÿè®¡ä¿¡æ¯ç­‰ã€‚

## è¯¦æƒ…ä¿¡æ¯ç±»å‹

<CardGroup cols={2}>
  <Card title="åŸºæœ¬ä¿¡æ¯" icon="info-circle">
    è®¾å¤‡åç§°ã€åˆ›å»ºæ—¶é—´ã€æ‰€å±äº§å“ç­‰åŸºç¡€å±æ€§
  </Card>
  <Card title="çŠ¶æ€ä¿¡æ¯" icon="signal">
    åœ¨çº¿çŠ¶æ€ã€æœ€åä¸Šçº¿æ—¶é—´ã€è¿æ¥è´¨é‡ç­‰çŠ¶æ€æ•°æ®
  </Card>
  <Card title="é…ç½®ä¿¡æ¯" icon="cog">
    è®¾å¤‡é…ç½®ã€å›ºä»¶ç‰ˆæœ¬ã€å®‰å…¨ç­–ç•¥ç­‰é…ç½®å‚æ•°
  </Card>
  <Card title="ç»Ÿè®¡æ•°æ®" icon="chart-bar">
    æ¶ˆæ¯æ•°é‡ã€æ•°æ®æµé‡ã€åœ¨çº¿æ—¶é•¿ç­‰ç»Ÿè®¡ä¿¡æ¯
  </Card>
</CardGroup>

## è®¾å¤‡çŠ¶æ€è¯´æ˜

<Tabs>
  <Tab title="åœ¨çº¿ (ONLINE)">
    **è®¾å¤‡å·²è¿æ¥**: è®¾å¤‡æ­£å¸¸è¿æ¥åˆ°å¹³å°å¹¶å¯ä»¥é€šä¿¡
    - å¯ä»¥æ¥æ”¶ä¸‹è¡Œå‘½ä»¤å’Œæ•°æ®
    - èƒ½å¤Ÿä¸»åŠ¨ä¸ŠæŠ¥æ•°æ®å’Œäº‹ä»¶
    - æ”¯æŒå®æ—¶ç›‘æ§å’Œæ§åˆ¶
    - å“åº”æ—¶é—´é€šå¸¸åœ¨ç§’çº§åˆ«
  </Tab>
  
  <Tab title="ç¦»çº¿ (OFFLINE)">
    **è®¾å¤‡å·²æ–­å¼€**: è®¾å¤‡æš‚æ—¶å¤±å»ä¸å¹³å°çš„è¿æ¥
    - æ— æ³•æ¥æ”¶å®æ—¶å‘½ä»¤
    - ä¸‹è¡Œæ¶ˆæ¯ä¼šè¢«å¹³å°ç¼“å­˜
    - è®¾å¤‡é‡æ–°ä¸Šçº¿æ—¶ä¼šæ¥æ”¶ç¼“å­˜æ¶ˆæ¯
    - å¯èƒ½ç”±äºç½‘ç»œã€ç”µæºæˆ–è®¾å¤‡æ•…éšœå¯¼è‡´
  </Tab>
  
  <Tab title="æœªæ¿€æ´» (UNACTIVE)">
    **è®¾å¤‡æœªé¦–æ¬¡è¿æ¥**: è®¾å¤‡å·²æ³¨å†Œä½†ä»æœªè¿æ¥è¿‡å¹³å°
    - è®¾å¤‡å¯†é’¥å·²ç”Ÿæˆä½†æœªä½¿ç”¨
    - éœ€è¦è®¾å¤‡ç«¯è¿›è¡Œé¦–æ¬¡è¿æ¥æ¿€æ´»
    - æ¿€æ´»åçŠ¶æ€ä¼šå˜ä¸ºONLINEæˆ–OFFLINE
    - é€šå¸¸å‡ºç°åœ¨æ–°æ³¨å†Œçš„è®¾å¤‡
  </Tab>
</Tabs>

## ä»£ç ç¤ºä¾‹

<CodeGroup>

```javascript JavaScript
async function getDeviceDetail(token, productKey, deviceKey) {
  const response = await fetch(
    `https://iot-api.quectelcn.com/v2/devicemgr/r3/openapi/device/detail?productKey=${productKey}&deviceKey=${deviceKey}`,
    {
      headers: {
        'Authorization': token,
        'Content-Type': 'application/json'
      }
    }
  );
  
  if (!response.ok) {
    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
  }
  
  return await response.json();
}

// ä½¿ç”¨ç¤ºä¾‹
async function displayDeviceInfo(token, productKey, deviceKey) {
  try {
    const result = await getDeviceDetail(token, productKey, deviceKey);
    const device = result.data;
    
    console.log('=== è®¾å¤‡è¯¦ç»†ä¿¡æ¯ ===');
    console.log(`è®¾å¤‡åç§°: ${device.deviceName}`);
    console.log(`è®¾å¤‡çŠ¶æ€: ${device.status}`);
    console.log(`æœ€åä¸Šçº¿: ${device.lastOnlineTime}`);
    console.log(`å›ºä»¶ç‰ˆæœ¬: ${device.firmwareVersion}`);
    console.log(`IPåœ°å€: ${device.ipAddress}`);
    
    // æ ¹æ®è®¾å¤‡çŠ¶æ€æ˜¾ç¤ºä¸åŒä¿¡æ¯
    if (device.status === 'ONLINE') {
      console.log('âœ… è®¾å¤‡åœ¨çº¿ï¼Œå¯ä»¥è¿›è¡Œå®æ—¶æ“ä½œ');
      console.log(`ä¿¡å·å¼ºåº¦: ${device.signalStrength}dBm`);
      console.log(`ç½‘ç»œç±»å‹: ${device.networkType}`);
    } else if (device.status === 'OFFLINE') {
      console.log('âš ï¸ è®¾å¤‡ç¦»çº¿ï¼Œæ¶ˆæ¯å°†è¢«ç¼“å­˜');
      const offlineTime = new Date() - new Date(device.lastOnlineTime);
      console.log(`ç¦»çº¿æ—¶é•¿: ${Math.floor(offlineTime / 1000 / 60)} åˆ†é’Ÿ`);
    } else if (device.status === 'UNACTIVE') {
      console.log('ğŸ”„ è®¾å¤‡æœªæ¿€æ´»ï¼Œç­‰å¾…é¦–æ¬¡è¿æ¥');
    }
    
    return device;
  } catch (error) {
    console.error('è·å–è®¾å¤‡è¯¦æƒ…å¤±è´¥:', error.message);
    return null;
  }
}

// ç›‘æ§è®¾å¤‡çŠ¶æ€å˜åŒ–
async function monitorDeviceStatus(token, productKey, deviceKey, intervalSeconds = 30) {
  const monitor = setInterval(async () => {
    const device = await getDeviceDetail(token, productKey, deviceKey);
    if (device) {
      console.log(`[${new Date().toISOString()}] è®¾å¤‡ ${deviceKey} çŠ¶æ€: ${device.data.status}`);
    }
  }, intervalSeconds * 1000);
  
  // è¿”å›åœæ­¢ç›‘æ§çš„å‡½æ•°
  return () => clearInterval(monitor);
}
```

```python Python
import requests
from datetime import datetime, timezone
import time

def get_device_detail(token, product_key, device_key):
    """
    è·å–è®¾å¤‡è¯¦ç»†ä¿¡æ¯
    
    Args:
        token: JWTè®¤è¯ä»¤ç‰Œ
        product_key: äº§å“PK
        device_key: è®¾å¤‡DK
        
    Returns:
        è®¾å¤‡è¯¦ç»†ä¿¡æ¯
    """
    url = "https://iot-api.quectelcn.com/v2/devicemgr/r3/openapi/device/detail"
    
    params = {
        "productKey": product_key,
        "deviceKey": device_key
    }
    
    headers = {
        "Authorization": token,
        "Content-Type": "application/json"
    }
    
    response = requests.get(url, params=params, headers=headers)
    response.raise_for_status()
    
    return response.json()

class DeviceMonitor:
    def __init__(self, token):
        self.token = token
        
    def get_device_info(self, product_key, device_key):
        """è·å–è®¾å¤‡ä¿¡æ¯å¹¶æ ¼å¼åŒ–æ˜¾ç¤º"""
        try:
            result = get_device_detail(self.token, product_key, device_key)
            device = result["data"]
            
            print(f"è®¾å¤‡åç§°: {device['deviceName']}")
            print(f"è®¾å¤‡DK: {device['deviceKey']}")
            print(f"è®¾å¤‡çŠ¶æ€: {device['status']}")
            print(f"åˆ›å»ºæ—¶é—´: {device['createTime']}")
            print(f"æœ€åä¸Šçº¿: {device.get('lastOnlineTime', 'ä»æœªä¸Šçº¿')}")
            
            if 'location' in device:
                print(f"è®¾å¤‡ä½ç½®: {device['location']}")
            
            if 'firmwareVersion' in device:
                print(f"å›ºä»¶ç‰ˆæœ¬: {device['firmwareVersion']}")
                
            if 'hardwareVersion' in device:
                print(f"ç¡¬ä»¶ç‰ˆæœ¬: {device['hardwareVersion']}")
            
            # è®¡ç®—åœ¨çº¿æ—¶é•¿ç»Ÿè®¡
            if device.get('totalOnlineTime'):
                hours = device['totalOnlineTime'] // 3600
                print(f"ç´¯è®¡åœ¨çº¿æ—¶é•¿: {hours} å°æ—¶")
            
            return device
            
        except requests.exceptions.RequestException as e:
            print(f"è·å–è®¾å¤‡è¯¦æƒ…å¤±è´¥: {e}")
            return None
    
    def check_device_health(self, product_key, device_key):
        """æ£€æŸ¥è®¾å¤‡å¥åº·çŠ¶æ€"""
        device = self.get_device_info(product_key, device_key)
        if not device:
            return None
            
        health_score = 100
        issues = []
        
        # æ£€æŸ¥è¿æ¥çŠ¶æ€
        if device['status'] == 'OFFLINE':
            health_score -= 30
            issues.append("è®¾å¤‡ç¦»çº¿")
        elif device['status'] == 'UNACTIVE':
            health_score -= 50
            issues.append("è®¾å¤‡æœªæ¿€æ´»")
        
        # æ£€æŸ¥æœ€åä¸Šçº¿æ—¶é—´
        if device.get('lastOnlineTime'):
            last_online = datetime.fromisoformat(device['lastOnlineTime'].replace('Z', '+00:00'))
            offline_hours = (datetime.now(timezone.utc) - last_online).total_seconds() / 3600
            
            if offline_hours > 24:
                health_score -= 20
                issues.append(f"è¶…è¿‡24å°æ—¶æœªä¸Šçº¿ ({offline_hours:.1f}å°æ—¶)")
            elif offline_hours > 1:
                health_score -= 10
                issues.append(f"è¶…è¿‡1å°æ—¶æœªä¸Šçº¿ ({offline_hours:.1f}å°æ—¶)")
        
        # æ£€æŸ¥æ¶ˆæ¯é¢‘ç‡
        if device.get('messageCount', 0) == 0:
            health_score -= 15
            issues.append("æ— æ¶ˆæ¯ä¸ŠæŠ¥")
        
        print(f"\nè®¾å¤‡å¥åº·è¯„åˆ†: {health_score}/100")
        if issues:
            print("å‘ç°é—®é¢˜:")
            for issue in issues:
                print(f"  - {issue}")
        else:
            print("è®¾å¤‡çŠ¶æ€è‰¯å¥½")
            
        return {
            "health_score": health_score,
            "issues": issues,
            "device": device
        }

# ä½¿ç”¨ç¤ºä¾‹
monitor = DeviceMonitor(token)

# è·å–è®¾å¤‡è¯¦æƒ…
device_info = monitor.get_device_info("p12345", "d67890")

# æ£€æŸ¥è®¾å¤‡å¥åº·çŠ¶æ€
health_status = monitor.check_device_health("p12345", "d67890")
```

```curl cURL
# æŸ¥è¯¢è®¾å¤‡è¯¦æƒ…
curl -X GET "https://iot-api.quectelcn.com/v2/devicemgr/r3/openapi/device/detail?productKey=p12345&deviceKey=d67890" \
  -H "Authorization: YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json"
```

</CodeGroup>

## å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "msg": "OK",
  "data": {
    "deviceKey": "d67890",
    "deviceName": "è½¦é—´æ¸©åº¦ä¼ æ„Ÿå™¨-001",
    "productKey": "p12345",
    "status": "ONLINE",
    "createTime": "2023-12-01T08:30:00Z",
    "lastOnlineTime": "2023-12-15T14:25:30Z",
    "firstOnlineTime": "2023-12-01T09:15:20Z",
    "description": "è½¦é—´AåŒºåŸŸæ¸©åº¦ç›‘æµ‹è®¾å¤‡",
    "location": {
      "latitude": 31.2304,
      "longitude": 121.4737,
      "address": "ä¸Šæµ·å¸‚é»„æµ¦åŒºè½¦é—´A"
    },
    "firmwareVersion": "v2.1.3",
    "hardwareVersion": "v1.0.1",
    "deviceModel": "QT-TH-2023",
    "networkInfo": {
      "ipAddress": "192.168.1.100",
      "networkType": "4G-LTE",
      "signalStrength": -75,
      "carrierId": "46000",
      "cellId": "12345678"
    },
    "statistics": {
      "totalOnlineTime": 86400,
      "messageCount": 1250,
      "lastMessageTime": "2023-12-15T14:20:15Z",
      "dataUsage": {
        "uplink": 1048576,
        "downlink": 524288
      }
    },
    "configuration": {
      "reportingInterval": 300,
      "batchSize": 10,
      "retryTimes": 3,
      "heartbeatInterval": 60
    },
    "security": {
      "authMethod": "PSK",
      "encryptionEnabled": true,
      "lastAuthTime": "2023-12-15T14:25:30Z",
      "certificateExpiry": "2024-12-01T00:00:00Z"
    },
    "tags": {
      "department": "ç”Ÿäº§éƒ¨",
      "workshop": "Aè½¦é—´",
      "equipment": "æ¸©æ§ç³»ç»Ÿ"
    }
  }
}
```

## è¯¦æƒ…å­—æ®µè¯´æ˜

<AccordionGroup>
  <Accordion title="åŸºæœ¬ä¿¡æ¯å­—æ®µ">
    - **deviceKey**: è®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦
    - **deviceName**: è®¾å¤‡å‹å¥½åç§°
    - **productKey**: æ‰€å±äº§å“æ ‡è¯†
    - **status**: è®¾å¤‡å½“å‰çŠ¶æ€
    - **createTime**: è®¾å¤‡æ³¨å†Œæ—¶é—´
    - **description**: è®¾å¤‡æè¿°ä¿¡æ¯
    - **location**: è®¾å¤‡åœ°ç†ä½ç½®ä¿¡æ¯
  </Accordion>
  
  <Accordion title="ç‰ˆæœ¬ä¿¡æ¯å­—æ®µ">
    - **firmwareVersion**: è®¾å¤‡å›ºä»¶ç‰ˆæœ¬
    - **hardwareVersion**: è®¾å¤‡ç¡¬ä»¶ç‰ˆæœ¬
    - **deviceModel**: è®¾å¤‡å‹å·
    - **softwareVersion**: åº”ç”¨è½¯ä»¶ç‰ˆæœ¬
    - **protocolVersion**: é€šä¿¡åè®®ç‰ˆæœ¬
  </Accordion>
  
  <Accordion title="ç½‘ç»œä¿¡æ¯å­—æ®µ">
    - **ipAddress**: è®¾å¤‡IPåœ°å€
    - **networkType**: ç½‘ç»œè¿æ¥ç±»å‹
    - **signalStrength**: ä¿¡å·å¼ºåº¦(dBm)
    - **carrierId**: è¿è¥å•†æ ‡è¯†
    - **cellId**: åŸºç«™å°åŒºID
    - **macAddress**: MACåœ°å€
  </Accordion>
  
  <Accordion title="ç»Ÿè®¡ä¿¡æ¯å­—æ®µ">
    - **totalOnlineTime**: ç´¯è®¡åœ¨çº¿æ—¶é•¿(ç§’)
    - **messageCount**: æ¶ˆæ¯æ€»æ•°
    - **lastMessageTime**: æœ€åæ¶ˆæ¯æ—¶é—´
    - **dataUsage**: æ•°æ®æµé‡ç»Ÿè®¡
    - **errorCount**: é”™è¯¯æ¬¡æ•°
    - **successRate**: æˆåŠŸç‡ç™¾åˆ†æ¯”
  </Accordion>
</AccordionGroup>

## ä½¿ç”¨åœºæ™¯

<CardGroup cols={2}>
  <Card title="è®¾å¤‡ç›‘æ§" icon="monitor">
    å®æ—¶æŸ¥çœ‹è®¾å¤‡çŠ¶æ€å’Œå¥åº·æƒ…å†µ
  </Card>
  <Card title="æ•…éšœè¯Šæ–­" icon="wrench">
    åˆ†æè®¾å¤‡è¿æ¥å’Œé€šä¿¡é—®é¢˜
  </Card>
  <Card title="ç»´æŠ¤ç®¡ç†" icon="tools">
    åˆ¶å®šè®¾å¤‡ç»´æŠ¤å’Œå‡çº§è®¡åˆ’
  </Card>
  <Card title="èµ„äº§ç®¡ç†" icon="clipboard-list">
    è®¾å¤‡èµ„äº§ä¿¡æ¯å’Œä½ç½®ç®¡ç†
  </Card>
</CardGroup>

## è®¾å¤‡çŠ¶æ€ç›‘æ§

```javascript
// è®¾å¤‡çŠ¶æ€å˜åŒ–æ£€æµ‹
class DeviceStatusTracker {
  constructor(token) {
    this.token = token;
    this.statusHistory = new Map();
  }
  
  async trackDevice(productKey, deviceKey) {
    const currentStatus = await this.getCurrentStatus(productKey, deviceKey);
    const previousStatus = this.statusHistory.get(deviceKey);
    
    if (previousStatus && previousStatus !== currentStatus) {
      this.onStatusChange(deviceKey, previousStatus, currentStatus);
    }
    
    this.statusHistory.set(deviceKey, currentStatus);
    return currentStatus;
  }
  
  onStatusChange(deviceKey, oldStatus, newStatus) {
    console.log(`è®¾å¤‡ ${deviceKey} çŠ¶æ€å˜åŒ–: ${oldStatus} -> ${newStatus}`);
    
    // å‘é€å‘Šè­¦é€šçŸ¥
    if (newStatus === 'OFFLINE') {
      this.sendAlert(deviceKey, 'è®¾å¤‡ç¦»çº¿å‘Šè­¦');
    } else if (newStatus === 'ONLINE' && oldStatus === 'OFFLINE') {
      this.sendNotification(deviceKey, 'è®¾å¤‡å·²æ¢å¤åœ¨çº¿');
    }
  }
}
```

## é”™è¯¯å¤„ç†

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|---------|------|----------|
| 50006 | ProductKeyä¸ºç©º | æä¾›æœ‰æ•ˆçš„productKeyå‚æ•° |
| 50007 | DeviceKeyä¸ºç©º | æä¾›æœ‰æ•ˆçš„deviceKeyå‚æ•° |
| 70017 | äº§å“ä¸å­˜åœ¨ | éªŒè¯äº§å“å­˜åœ¨ä¸”å¯è®¿é—® |
| 70018 | è®¾å¤‡ä¸å­˜åœ¨ | éªŒè¯è®¾å¤‡å·²æ³¨å†Œä¸”å­˜åœ¨ |
| 70089 | æƒé™å—é™ | æ£€æŸ¥SaaSåº”ç”¨çš„è®¾å¤‡è®¿é—®æƒé™ |